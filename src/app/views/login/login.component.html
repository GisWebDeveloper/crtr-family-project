<div class="bg-light" style="min-height: 25vh !important;">
    <div class="container-fluid">
        <c-row>
            <c-col md="10" class="d-flex align-items-center pt-4 ps-5">
                <div class="float-start">
                    <img loading="lazy" src="./assets/images/rk_emblem.png" width="80px"/>
                </div>
                <div class="float-start text-uppercase fw-bolder ms-3" style="width: 420px;">
                    <div>{{ 'ministry' | translate }}</div>
                </div>
            </c-col>
        </c-row>
        <c-row class="mt-3">
            <c-col class="display-3 text-center">
                <div>{{ 'title' | translate }}</div>
            </c-col>
        </c-row>
    </div>
</div>

<div class="bg-light d-flex flex-row pt-5" style="height: 75vh !important;">
    <c-container>
        <c-row class="justify-content-center">
            <c-col md="4">
                <c-card-group>
                    <c-card class="p-4">
                        <c-card-body>
                            <form cForm novalidate [formGroup]="loginForm" (ngSubmit)="login()" *ngIf="form == 'LOGIN'">
                                <h1>{{ 'login-page.login' | translate }}</h1>
                                <p class="text-medium-emphasis">{{ 'login-page.sign-in-desc' | translate }}</p>
                                <c-input-group class="mb-3">
                                    <span cInputGroupText><svg cIcon name="cilUser"></svg></span>
                                    <input autoComplete="username" cFormControl formControlName="username"
                                           placeholder="{{ 'login-page.username' | translate }}"/>
                                </c-input-group>
                                <c-input-group class="mb-4">
                                    <span cInputGroupText><svg cIcon name="cilLockLocked"></svg></span>
                                    <input autoComplete="current-password" cFormControl formControlName="password"
                                           type="password"
                                           placeholder="{{ 'login-page.password' | translate }}"/>
                                </c-input-group>
                                <c-row>
                                    <c-col xs="6">
                                        <button type="submit" cButton class="px-4" color="primary"
                                                [disabled]="!loginForm.valid">
                                            {{ 'login-page.enter' | translate }}</button>
                                    </c-col>
                                    <c-col class="text-end" xs="6">
                                        <button cButton class="px-0" color="link" (click)="changeForm('PASSWORD')">
                                            {{ 'login-page.change-password' | translate }}</button>
                                    </c-col>
                                </c-row>
                            </form>
                            <form cForm novalidate [formGroup]="passwordForm" (ngSubmit)="changePassword()"
                                  *ngIf="form == 'PASSWORD'">
                                <h1>{{ 'login-page.change-password' | translate }}</h1>
                                <p class="text-medium-emphasis">{{ 'login-page.change-password-desc' | translate }}</p>
                                <c-input-group class="mb-3">
                                    <span cInputGroupText><svg cIcon name="cilUser"></svg></span>
                                    <input autoComplete="username" cFormControl formControlName="username"
                                           placeholder="{{ 'login-page.username' | translate }}"/>
                                </c-input-group>
                                <c-input-group class="mb-4">
                                    <span cInputGroupText><svg cIcon name="cilLockLocked"></svg></span>
                                    <input autoComplete="current-password" cFormControl formControlName="password"
                                           type="password"
                                           placeholder="{{ 'login-page.password' | translate }}"/>
                                </c-input-group>
                                <c-input-group class="mb-4">
                                    <span cInputGroupText><svg cIcon name="cilLockLocked"></svg></span>
                                    <input cFormControl type="password" formControlName="newPassword"
                                           autoComplete="new-password" required
                                           placeholder="{{ 'login-page.new-password' | translate }}"/>
                                    <span cInputGroupText role="button" cPopoverPlacement="right"
                                          [cPopover]="passPopoverHtml" [cPopoverTrigger]="'click'">
                                        <i class="fa fa-info"></i>
                                    </span>
                                </c-input-group>
                                <c-input-group class="mb-4">
                                    <span cInputGroupText><svg cIcon name="cilLockLocked"></svg></span>
                                    <input cFormControl type="password" formControlName="confirmPassword"
                                           autoComplete="confirm-password" required
                                           placeholder="{{ 'login-page.confirm-password' | translate }}"/>
                                    <span cInputGroupText role="button" cPopoverPlacement="right"
                                          [cPopover]="passPopoverHtml" [cPopoverTrigger]="'click'">
                                        <i class="fa fa-info"></i>
                                    </span>
                                </c-input-group>
                                <c-row>
                                    <c-col xs="6">
                                        <button type="submit" cButton class="px-4" color="primary"
                                                [disabled]="!passwordForm.valid">
                                            {{ 'save' | translate }}</button>
                                    </c-col>
                                    <c-col class="text-end" xs="6">
                                        <button cButton class="px-0" color="link" (click)="changeForm('LOGIN')">
                                            {{ 'cancel' | translate }}</button>
                                    </c-col>
                                </c-row>
                                <ng-template #passPopoverHtml>
                                    <h3 class="popover-header">
                                        {{ 'login-page.password-requirements' | translate }}</h3>
                                    <div class="popover-body">
                                        <li>{{ 'login-page.password-requirement-1' | translate }}</li>
                                        <li>{{ 'login-page.password-requirement-2' | translate }}</li>
                                    </div>
                                </ng-template>
                            </form>
                        </c-card-body>
                    </c-card>
                </c-card-group>
            </c-col>
        </c-row>
    </c-container>
</div>
